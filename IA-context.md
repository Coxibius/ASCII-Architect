# ðŸ§  IA Context: ASCII Architect Project

> **System Note for Future AI Agents:**  
> This document outlines the technical constraints, terminology, and architecture of the "ASCII Architect" project. Use this as your primary source of truth to avoid hallucinations about the codebase structure or capability.

---

## 1. Project Identity
**Name:** ASCII Architect (Project Terminal-God)  
**Goal:** Create an engineering-grade ASCII diagram generation tool runs in the terminal (`cli`), powered by specialized small-language models (SLMs) based on GPT-2.  
**Philosophy:** "Engineering over Art". Precision (straight lines, exact dimensions) is prioritized over artistic style.  
**Current Version:** V18 (Hybrid Engine)

---

## 2. Technical Architecture

### Core Engine (`src/engine.py`)
- **Model:** Fine-tuned GPT-2 (`GPT2LMHeadModel`).
- **Location:** `root/ascii-architect/models/ASCII_Architect_V1_Models/`
- **Logic:** Calls specialized "Expert" models based on `expert_type`.
    - `expert_box`: Generates boxes/containers.
    - `expert_arrow`: Generates connection lines.
    - *Planned:* `expert_diamond` (Decision), `expert_soft_box` (Soft Box/Entity).

### The Router (`src/router.py`)
- **Purpose:** Orchestrates the placement of shapes generated by the Engine.
- **Current Logic:** Linear Flow (`A -> B -> C`).
- **Mechanism:**
    1.  Calculates variable box width based on text length.
    2.  Prompts `expert_box` with specific `[DIM:WxH]`.
    3.  Stamps box onto `Canvas`.
    4.  Calculates gap.
    5.  Prompts `expert_arrow` with `[LEN:N]`.
    6.  Stamps arrow.
- **Future Logic:** "Manhattan Routing" (Elbow connections for complex graphs).

### The Interface (`src/cli.py`)
- **Library:** `Typer`.
- **Commands:**
    - `ascii-arch box --text "X" --size WxH`
    - `ascii-arch flow "A -> B -> C"`

---

## 3. Syntax & Tokens (The "Language")

The models are trained on a strict syntax. **Do not hallucinate new tokens.**

### A. Structural Tokens (The Skeleton)
| Token | Meaning | Usage |
| :--- | :--- | :--- |
| `<Lxx>` | **Line Index** | Ensures vertical alignment (e.g., `<L01>`, `<L02>`). |
| `[S:xx]` | **Space Math** | Horizontal offset/padding (e.g., `[S:05]` adds 5 spaces). |
| `[STOP]` | **End of Generation** | Hard stop token. |

### B. Visual Tokens (The Ink)
| Token | Meaning | Context |
| :--- | :--- | :--- |
| `â–‘` | **Alpha/Transparent** | Filled inside boxes to allow Python to inject text later. |
| `+ - |` | **Borders** | Standard box edges. |
| `N S E W` | **Anchors** | Connection points (North, South, East, West) for the Router. |

### C. Prompt Tags (The Instructions)
- **Type:** `[TYPE:BOX]`, `[TYPE:ARROW]`
- **Style:** `[STYLE:SOLID]`, `[STYLE:ROUND]`, `[STYLE:DOTTED]`
- **Dimensions:** `[DIM:WxH]` (Crucial for V18).
- **Direction:** `[DIR:RIGHT]`, `[DIR:DOWN]` (For arrows).
- **Length:** `[LEN:xx]` (For arrows).

---

## 4. Current Status (Roadmap Snapshot)

### âœ… Completed
- **V18 Engine:** Stable. Generates variable-width boxes and arrows.
- **Canvas System:** Can "stamp" ASCII onto a 2D grid.
- **Basic CLI:** `box`, `arrow`, and `flow` commands working.
- **Text Injection:** Python places text over the `â–‘` helper characters.

### ðŸš§ In Progress (The "Next Step")
- **Manhattan Routing:** Logic to connect non-linear nodes (e.g., A at (0,0) to B at (10,10)) using `+` corners and elbow paths.
- **UML Shapes:** Training `expert_diamond` and `expert_cylinder`.
- **Packaging:** Creating `pyproject.toml` for PyPI distribution.

---

## 5. File Structure
```text
C:\ASCII-Architect\
â”œâ”€â”€ ascii-architect\
â”‚   â”œâ”€â”€ src\
â”‚   â”‚   â”œâ”€â”€ engine.py       # Brain (GPT-2 Wrapper)
â”‚   â”‚   â”œâ”€â”€ router.py       # Layout Logic
â”‚   â”‚   â”œâ”€â”€ cli.py          # Terminal Interface
â”‚   â”‚   â”œâ”€â”€ ascii_architect\
â”‚   â”‚   â”‚   â””â”€â”€ canvas.py   # Grid/Rendering System
â”‚   â”‚   â””â”€â”€ utils.py        # Helpers (Text Injection)
â”‚   â””â”€â”€ models\             # Local model weights
â””â”€â”€ IA-context.md           # [YOU ARE HERE]
```
