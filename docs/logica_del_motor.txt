Aqu√≠ tienes la Especificaci√≥n T√©cnica V18 (ASCII-Architect).

1. EL NUEVO DICCIONARIO DE TOKENS

Mantenemos la tecnolog√≠a Hybrid (Visual + Matem√°tico), pero adaptamos los s√≠mbolos al mundo de la ingenier√≠a.

A. Tokens Estructurales (SE QUEDAN IGUAL)

Estos son el n√∫cleo de tu motor. No los toques.

<Lxx>: (Line Index) Vital para mantener la verticalidad.

[S:xx]: (Space Math) Vital para empujar las cajas a la derecha sin deformarlas.

[STOP]: La guillotina.

B. Tokens Visuales (EL CAMBIO DE PIEL)

El Stickman usaba o y (. El Arquitecto usa l√≠neas rectas.

Token V17 (Stickman)	Token V18 (Architect)	Uso
‚ñë (Alpha)	‚ñë	Mismo uso. Relleno/Transparencia.
¬ß (Cuello)	N, S	Anchors Verticales (North/South). Puntos de conexi√≥n para flechas.
L, R (Hombros)	W, E	Anchors Horizontales (West/East).
( ) / \	+ - `	`
¬µ (Grip)	> < ^ v	Puntas de Flecha.
C. Tags de Prompt (NUEVA SEM√ÅNTICA)

Aqu√≠ es donde le damos inteligencia.

Tipos: [TYPE:BOX], [TYPE:ARROW], [TYPE:DB], [TYPE:CLOUD].

Estilos: [STYLE:SOLID] (+---+), [STYLE:DOTTED] (.....), [STYLE:ROUND] ((...)).

Dimensiones (¬°NUEVO!): [DIM:10x3], [DIM:15x5].

Nota: Esto es cr√≠tico. El modelo debe aprender a dibujar cajas de diferentes anchos.

2. LA L√ìGICA DE GENERACI√ìN (Factory 2.0)

El Stickman ten√≠a tama√±o fijo (5x5). Las cajas de arquitectura var√≠an.
Necesitamos un script Factory_Boxes.py que genere miles de cajas de diferentes tama√±os y estilos.

Aqu√≠ te muestro c√≥mo adaptar tu l√≥gica "format_line_hybrid" para este nuevo mundo.

üß† Script: Factory_Architect_V1.py

(Solo el generador de datos para entrenar al Expert_Box)

code
Python
download
content_copy
expand_less
import json
import random

# CONFIGURACI√ìN
OUTPUT_FILE = "train_boxes.jsonl"
SAMPLES = 5000

# DICCIONARIO V18
ALPHA = "‚ñë"
ANCHOR_N = "N"
ANCHOR_S = "S"
ANCHOR_E = "E"
ANCHOR_W = "W"
BORDER_H = "-"
BORDER_V = "|"
CORNER = "+"

def generate_box_art(width, height, style="SOLID"):
    """
    Genera una caja ASCII perfecta con anchors l√≥gicos.
    Ejemplo 5x3:
    +N--+
    W‚ñë‚ñë‚ñëE
    +S--+
    """
    art = []
    
    # 1. TECHO (Con Anchor Norte)
    # Calculamos centro para poner la N
    mid = width // 2
    top = CORNER + (BORDER_H * (mid - 1)) + ANCHOR_N + (BORDER_H * (width - mid - 2)) + CORNER
    art.append(top)
    
    # 2. CUERPO (Con Anchors Oeste/Este y relleno transparente)
    # Repetimos seg√∫n la altura (height - 2 tapas)
    inner_width = width - 2
    filler = ALPHA * inner_width # Usamos ‚ñë para el relleno
    
    for _ in range(height - 2):
        # Pared W + Relleno + Pared E
        # Nota: Ponemos W y E en medio de las paredes verticales
        row = ANCHOR_W + filler + ANCHOR_E 
        # (Ojo: En realidad W y E deber√≠an reemplazar al BORDER_V en el centro, 
        # pero para simplificar el entrenamiento, hagamos que los bordes sean W/E a veces)
        
        # Opci√≥n m√°s simple para V1: Bordes normales, anchors solo en centros
        row = BORDER_V + filler + BORDER_V
        art.append(row)
        
    # Inyectamos anchors W/E en la fila central
    center_row_idx = len(art) // 2
    # Reconstruimos la fila central con anchors
    art[center_row_idx] = ANCHOR_W + filler + ANCHOR_E

    # 3. SUELO (Con Anchor Sur)
    bottom = CORNER + (BORDER_H * (mid - 1)) + ANCHOR_S + (BORDER_H * (width - mid - 2)) + CORNER
    art.append(bottom)
    
    return art

def format_hybrid_v18(line, line_idx):
    """
    LA L√ìGICA H√çBRIDA ADAPTADA:
    No necesitamos padding a la derecha porque la caja tiene ancho variable.
    Solo necesitamos calcular el [S:xx] inicial si queremos moverla.
    """
    # Para el entrenamiento, asumimos que la caja empieza en X=0
    # As√≠ que S es siempre 00. El Orquestador decidir√° d√≥nde ponerla (X,Y).
    s_token = "[S:00]" 
    l_token = f"<L{line_idx+1:02d}>"
    
    return f"{l_token} {s_token} {line}"

# --- GENERADOR PRINCIPAL ---
with open(OUTPUT_FILE, "w") as f:
    for _ in range(SAMPLES):
        # Variamos dimensiones
        w = random.randint(5, 20) # Ancho entre 5 y 20 caracteres
        h = random.randint(3, 10) # Alto entre 3 y 10 l√≠neas
        
        # Generar arte crudo
        raw_art = generate_box_art(w, h)
        
        # Crear Prompt con metadatos expl√≠citos
        # El modelo debe aprender a correlacionar [DIM:WxH] con el dibujo
        prompt = f"[TYPE:BOX] [STYLE:SOLID] [DIM:{w}x{h}]"
        
        # Formatear Completion (V15+V17 Logic)
        comp_lines = [format_hybrid_v18(l, i) for i, l in enumerate(raw_art)]
        completion = "\n".join(comp_lines) + " [STOP]"
        
        f.write(json.dumps({"prompt": prompt, "completion": completion}) + "\n")

print("‚úÖ Dataset de Arquitecto generado.")
3. EL CAMBIO EN EL ORQUESTADOR (Python Logic)

Cuando tengamos este modelo (Expert_Box), tu orquestador cambiar√° un poco.

Antes (Stickman):

Ensamblaje vertical ciego (Totem).

Ahora (Architect):

Superposici√≥n de Texto: El modelo generar√° el "cascar√≥n" de la caja lleno de ‚ñë. Tu Python tendr√° que tomar el texto "Database" y escribirlo encima de los ‚ñë.

Conversi√≥n de Anchors:

El modelo escupe: +N--+

Tu Python detecta N, guarda la coordenada (x=5, y=0) como punto de conexi√≥n, y visualmente reemplaza N por - o + para que se vea bonito.

4. RESUMEN DE LA ADAPTACI√ìN

Line Tokens <Lxx>: Se quedan. Son vitales para cajas altas.

Space Tokens [S:xx]: Se quedan, pero en el entrenamiento valdr√°n 00. En el uso real, el orquestador inyectar√° [S:15] para mover la caja a la derecha.

Visual ‚ñë: Vital. Es el lienzo donde escribiremos el texto luego.

Anchors: Cambian de partes del cuerpo a puntos cardinales (N, S, E, W).
